From 0cdd711478efa623c1e4e82145d37fe09cf33485 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ren=C3=AA=20de=20Souza=20Pinto?= <rene@renesp.com.br>
Date: Tue, 16 Jul 2024 15:51:23 +0200
Subject: [PATCH] vfio: Add include to libgen.h to build with musl libc
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

On Alpine 3.20 (musl libc) the build fails with the following error:

vfio/core.c:533:22: error: implicit declaration of function 'basename' [-Werror=implicit-function-declaration]

Including libgen.h fixes the issue.

Signed-off-by: RenÃª de Souza Pinto <rene@renesp.com.br>
---
 vfio/core.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/vfio/core.c b/vfio/core.c
index 0b45e78..bdc01fa 100644
--- a/vfio/core.c
+++ b/vfio/core.c
@@ -2,6 +2,7 @@
 #include "kvm/vfio.h"
 #include "kvm/ioport.h"
 
+#include <libgen.h>
 #include <linux/list.h>
 
 #define VFIO_DEV_DIR		"/dev/vfio"
-- 
2.43.0

